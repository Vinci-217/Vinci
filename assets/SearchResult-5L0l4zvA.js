import{u as I,f as se,g as te,h as _,i as ae,P as le,t as re,j as Ee,k as L,l as f,m as ue,w as M,n as t,p as ie,R as J,q as Ae,s as oe,v as ne,C as ce,x as ve,y as Be,z as he,A as pe,B as ye,D as H,E as de,F as me,G as Ce,H as T,I as V,J as Fe}from"./app-CO5d9UXL.js";const ge=["/","/intro.html","/%E4%BB%A3%E7%A0%81%E4%B9%8B%E5%A4%96/","/%E4%BB%A3%E7%A0%81%E4%B9%8B%E5%A4%96/%E6%88%90%E9%95%BF%E5%8E%86%E7%A8%8B.html","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/","/%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/","/%E7%95%99%E8%A8%80%E5%A2%99/","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/JavaScript%E5%9F%BA%E7%A1%80/JavaScript%E5%9F%BA%E7%A1%80%E9%9B%B6%E7%A2%8E.html","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/java%E5%9F%BA%E7%A1%80%E9%9B%B6%E7%A2%8E.html","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/python%E5%9F%BA%E7%A1%80.html","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/Vue%E5%9F%BA%E7%A1%80/Vue2%E5%9F%BA%E7%A1%80%E9%9B%B6%E7%A2%8E.html","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/Vue%E5%9F%BA%E7%A1%80/Vue3%E5%9F%BA%E7%A1%80%E9%9B%B6%E7%A2%8E.html","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle%E5%92%8CMysql%E7%9A%84%E5%8C%BA%E5%88%AB.html","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F.html","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0.html","/404.html","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/JavaScript%E5%9F%BA%E7%A1%80/","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/Vue%E5%9F%BA%E7%A1%80/","/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E6%95%B0%E6%8D%AE%E5%BA%93/","/category/","/tag/","/article/","/star/","/timeline/"],De="SEARCH_PRO_QUERY_HISTORY",y=I(De,[]),fe=()=>{const{queryHistoryCount:a}=H,l=a>0;return{enabled:l,queryHistory:y,addQueryHistory:r=>{l&&(y.value=Array.from(new Set([r,...y.value.slice(0,a-1)])))},removeQueryHistory:r=>{y.value=[...y.value.slice(0,r),...y.value.slice(r+1)]}}},P=a=>ge[a.id]+("anchor"in a?`#${a.anchor}`:""),He="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=H,d=I(He,[]),Re=()=>{const a=$>0;return{enabled:a,resultHistory:d,addResultHistory:l=>{if(a){const r={link:P(l),display:l.display};"header"in l&&(r.header=l.header),d.value=[r,...d.value.slice(0,$-1)]}},removeResultHistory:l=>{d.value=[...d.value.slice(0,l),...d.value.slice(l+1)]}}},ke=a=>{const l=ce(),r=_(),R=ve(),u=L(0),F=f(()=>u.value>0),B=Be([]);return he(()=>{const{search:h,terminate:k}=pe(),m=ye(o=>{const C=o.join(" "),{searchFilter:Q=v=>v,splitWord:w,suggestionsFilter:b,...p}=l.value;C?(u.value+=1,h(o.join(" "),r.value,p).then(v=>Q(v,C,r.value,R.value)).then(v=>{u.value-=1,B.value=v}).catch(v=>{console.warn(v),u.value-=1,u.value||(B.value=[])})):B.value=[]},H.searchDelay-H.suggestDelay);M([a,r],([o])=>m(o),{immediate:!0}),de(()=>{k()})}),{isSearching:F,results:B}};var we=se({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:l}){const r=te(),R=_(),u=ae(le),{enabled:F,addQueryHistory:B,queryHistory:h,removeQueryHistory:k}=fe(),{enabled:m,resultHistory:o,addResultHistory:C,removeResultHistory:Q}=Re(),w=F||m,b=re(a,"queries"),{results:p,isSearching:v}=ke(b),E=Ee({isQuery:!0,index:0}),n=L(0),c=L(0),O=f(()=>w&&(h.value.length>0||o.value.length>0)),S=f(()=>p.value.length>0),q=f(()=>p.value[n.value]||null),U=()=>{const{isQuery:e,index:s}=E;s===0?(E.isQuery=!e,E.index=e?o.value.length-1:h.value.length-1):E.index=s-1},Y=()=>{const{isQuery:e,index:s}=E;s===(e?h.value.length-1:o.value.length-1)?(E.isQuery=!e,E.index=0):E.index=s+1},z=()=>{n.value=n.value>0?n.value-1:p.value.length-1,c.value=q.value.contents.length-1},G=()=>{n.value=n.value<p.value.length-1?n.value+1:0,c.value=0},K=()=>{c.value<q.value.contents.length-1?c.value+=1:G()},N=()=>{c.value>0?c.value-=1:z()},x=e=>e.map(s=>Fe(s)?s:t(s[0],s[1])),W=e=>{if(e.type==="customField"){const s=me[e.index]||"$content",[i,D=""]=Ce(s)?s[R.value].split("$content"):s.split("$content");return e.display.map(A=>t("div",x([i,...A,D])))}return e.display.map(s=>t("div",x(s)))},g=()=>{n.value=0,c.value=0,l("updateQuery",""),l("close")},X=()=>F?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},u.value.queryHistory),h.value.map((e,s)=>t("div",{class:["search-pro-result-item",{active:E.isQuery&&E.index===s}],onClick:()=>{l("updateQuery",e)}},[t(T,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:V,onClick:i=>{i.preventDefault(),i.stopPropagation(),k(s)}})]))])):null,Z=()=>m?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},u.value.resultHistory),o.value.map((e,s)=>t(J,{to:e.link,class:["search-pro-result-item",{active:!E.isQuery&&E.index===s}],onClick:()=>{g()}},()=>[t(T,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(i=>x(i)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:V,onClick:i=>{i.preventDefault(),i.stopPropagation(),Q(s)}})]))])):null;return ue("keydown",e=>{if(a.isFocusing){if(S.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const s=q.value.contents[c.value];B(a.queries.join(" ")),C(s),r.push(P(s)),g()}}else if(m){if(e.key==="ArrowUp")U();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const{index:s}=E;E.isQuery?(l("updateQuery",h.value[s]),e.preventDefault()):(r.push(o.value[s].link),g())}}}}),M([n,c],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:a.queries.length?!S.value:!O.value}],id:"search-pro-results"},a.queries.length?v.value?t(ie,{hint:u.value.searching}):S.value?t("ul",{class:"search-pro-result-list"},p.value.map(({title:e,contents:s},i)=>{const D=n.value===i;return t("li",{class:["search-pro-result-list-item",{active:D}]},[t("div",{class:"search-pro-result-title"},e||u.value.defaultTitle),s.map((A,ee)=>{const j=D&&c.value===ee;return t(J,{to:P(A),class:["search-pro-result-item",{active:j,"aria-selected":j}],onClick:()=>{B(a.queries.join(" ")),C(A),g()}},()=>[A.type==="text"?null:t(A.type==="title"?Ae:A.type==="heading"?oe:ne,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[A.type==="text"&&A.header?t("div",{class:"content-header"},A.header):null,t("div",W(A))])])})])})):u.value.emptyResult:w?O.value?[X(),Z()]:u.value.emptyHistory:u.value.emptyResult)}});export{we as default};
